<!DOCTYPE html>
<html>
<head>
    <title>Penguin Escape</title>
    <style>
        body { text-align: center; background: #001b3a; color: white; font-family: sans-serif; margin: 0; padding: 20px; }
        canvas { background: #003366; border: 5px solid #fff; border-radius: 15px; display: block; margin: 0 auto; }
        #quiz-overlay { display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); 
                        background: white; color: black; padding: 20px; border-radius: 20px; width: 350px; border: 5px solid #3498db; }
        button { padding: 10px; margin: 5px 0; cursor: pointer; background: #3498db; color: white; border: none; border-radius: 8px; width: 100%; font-size: 16px; }
    </style>
</head>
<body>
    <h1>üêß Penguin Escape</h1>
    <div style="font-size: 20px; margin-bottom: 10px;">Hearts: <span id="hearts">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</span> | Score: <span id="score">0</span></div>
    <canvas id="gameCanvas" width="800" height="400"></canvas>
    <div id="quiz-overlay"><p id="question"></p><div id="options"></div></div>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
let score = 0, lives = 3, gameActive = true, isVictory = false, frameCount = 0;
let penguin = { x: 80, y: 180 }, iceCubes = [], bears = [], keys = {};

const questions = [{ q: "I went out ___ it was cold.", a: ["but", "so"], correct: "but" },{ q: "Run ___ you are late.", a: ["unless", "because"], correct: "because" }];

window.addEventListener('keydown', e => keys[e.code] = true);
window.addEventListener('keyup', e => { if(e.code === 'Space') iceCubes.push({ x: penguin.x + 50, y: penguin.y + 20 }); keys[e.code] = false; });

function draw() {
    ctx.clearRect(0, 0, 800, 400);
    frameCount++;
    if(gameActive && !isVictory) {
        if(keys['ArrowUp'] && penguin.y > 0) penguin.y -= 5;
        if(keys['ArrowDown'] && penguin.y < 350) penguin.y += 5;
    }
    // Draw Penguin
    ctx.font = "50px serif";
    ctx.fillText(isVictory ? "ü•≥" : "üêß", penguin.x, penguin.y + (isVictory ? Math.sin(frameCount*0.1)*20 : 0) + 40);
    if(!isVictory) ctx.fillText("üò®", penguin.x + 10, penguin.y - 10);

    // Draw Ice & Bears
    iceCubes.forEach((c, i) => { c.x += 10; ctx.fillText("‚ùÑÔ∏è", c.x, c.y); });
    bears.forEach((b, i) => {
        b.x -= 2; ctx.fillText("üêª‚Äç‚ùÑÔ∏è", b.x, b.y + 50);
        if(b.x < 0) { bears.splice(i,1); lives--; document.getElementById('hearts').innerText = "‚ù§Ô∏è".repeat(lives); }
        iceCubes.forEach((c, ci) => {
            if(Math.abs(c.x - b.x) < 40 && Math.abs(c.y - b.y) < 40) {
                bears.splice(i,1); iceCubes.splice(ci,1);
                gameActive = false; document.getElementById('quiz-overlay').style.display = 'block';
                let q = questions[score % questions.length];
                document.getElementById('question').innerText = q.q;
                document.getElementById('options').innerHTML = '';
                q.a.forEach(opt => {
                    let btn = document.createElement('button'); btn.innerText = opt;
                    btn.onclick = () => {
                        if(opt === q.correct) score++; else lives--;
                        document.getElementById('score').innerText = score;
                        document.getElementById('hearts').innerText = "‚ù§Ô∏è".repeat(lives);
                        document.getElementById('quiz-overlay').style.display = 'none';
                        if(score >= 10) isVictory = true; else gameActive = true;
                    };
                    document.getElementById('options').appendChild(btn);
                });
            }
        });
    });
    if(frameCount % 150 === 0) bears.push({ x: 850, y: Math.random() * 300 + 50 });
    if(lives > 0) requestAnimationFrame(draw); else alert("Game Over");
}
draw();
</script>
</body>
</html>
